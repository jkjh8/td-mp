(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-86fbcc06"],{2677:function(e,t,n){"use strict";var i=n("8654");t["a"]=i["a"]},5803:function(e,t,n){},"66b0":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-card",[n("v-card-title",[n("h4",[e._v("FILE LIST")]),n("v-spacer"),n("v-btn",{attrs:{icon:""},on:{click:e.filelistRefrash}},[n("v-icon",[e._v("mdi-reload")])],1),n("v-btn",{attrs:{icon:""},on:{click:e.deleteFiles}},[n("v-icon",[e._v("mdi-delete")])],1),n("v-btn",{attrs:{icon:""},on:{click:function(t){e.uploadDialog=!e.uploadDialog}}},[n("v-icon",[e._v("mdi-plus-circle-outline")])],1)],1),n("v-divider"),n("v-card-text",[n("FilelistTable",{ref:"filelistTable"}),n("v-dialog",{attrs:{"max-width":"600px",height:"300px",persistent:""},model:{value:e.uploadDialog,callback:function(t){e.uploadDialog=t},expression:"uploadDialog"}},[n("FileUpload",{on:{closeUpload:function(t){e.uploadDialog=!e.uploadDialog}}})],1)],1)],1)],1)},a=[],r=(n("96cf"),n("1da1")),l=n("9391"),o=n("7444"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-data-table",{attrs:{headers:e.headers,items:e.filelist,"item-key":"name","show-select":""},scopedSlots:e._u([{key:"item.duration",fn:function(t){var n=t.item;return[e._v(" "+e._s(e.times(n.duration))+" ")]}},{key:"item.size",fn:function(t){var n=t.item;return[e._v(" "+e._s(e.bytes(n.size))+" ")]}},{key:"item.preview",fn:function(t){var i=t.item;return[n("v-btn",{attrs:{icon:""},on:{click:function(t){return e.preview(i.name)}}},[n("v-icon",{attrs:{color:"green"}},[e._v(" mdi-play ")])],1)]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}),n("v-dialog",{attrs:{"max-width":"800px"},model:{value:e.previewDialog,callback:function(t){e.previewDialog=t},expression:"previewDialog"}},[n("Preview",{attrs:{"video-source":e.videoSource}})],1)],1)},c=[],u=(n("99af"),n("db61")),p={components:{Preview:u["a"]},mixins:[l["a"],o["a"]],data:function(){return{previewDialog:!1,videoSource:"",selected:[],headers:[{text:"Name",value:"name"},{text:"Type",value:"type"},{text:"Length",value:"duration"},{text:"Size",value:"size"},{text:"Preview",value:"preview"}]}},created:function(){this.getFilelist()},methods:{resetSelected:function(){this.selected=[]},delete:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.selected,0!==n.length){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,e.$axios.post("/api/filelist/del",n);case 5:i=t.sent,a=i.data,e.$store.dispatch("filelist/updateFilelist",a),e.resetSelected();case 9:case"end":return t.stop()}}),t)})))()},preview:function(e){this.previewDialog=!0,this.videoSource={width:800,autoplay:!0,sources:[{type:"video/mp4",src:"http://".concat(window.location.hostname,"/api/filelist/preview/").concat(e)}]}}}},d=p,h=n("2877"),f=n("6544"),v=n.n(f),g=n("8336"),m=n("a523"),b=n("8fea"),x=n("169a"),y=n("132d"),V=Object(h["a"])(d,s,c,!1,null,null,null),w=V.exports;v()(V,{VBtn:g["a"],VContainer:m["a"],VDataTable:b["a"],VDialog:x["a"],VIcon:y["a"]});var S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-card",[n("v-card-title",{staticClass:"grey lighten-4"},[n("h4",[e._v("FILE UPLOAD")])]),n("v-card-text",[n("v-file-input",{attrs:{placeholder:"Upload your files",label:"Select Files",multiple:"","prepend-icon":"mdi-paperclip"},scopedSlots:e._u([{key:"selection",fn:function(t){var i=t.text;return[n("v-chip",{attrs:{small:"",label:"",color:"primary"}},[e._v(" "+e._s(i)+" ")])]}}]),model:{value:e.selectedFiles,callback:function(t){e.selectedFiles=t},expression:"selectedFiles"}})],1),n("v-card-actions",{staticClass:"grey lighten-4"},[n("v-spacer"),n("v-btn",{attrs:{icon:""},on:{click:e.uploadFiles}},[n("v-icon",[e._v("mdi-check")])],1),n("v-btn",{staticClass:"pa-3",attrs:{icon:""},on:{click:e.close}},[n("v-icon",[e._v("mdi-cancel")])],1)],1)],1),n("v-dialog",{attrs:{"max-width":"600px",persistent:""},model:{value:e.uploadDialog,callback:function(t){e.uploadDialog=t},expression:"uploadDialog"}},[n("ProgressPopup",{attrs:{"upload-file-index":e.uploadFileIndex,"upload-file-name":e.uploadFileName,"progress-value":e.progressValue}})],1)],1)},k=[],C=(n("b0c0"),n("d4ec")),D=n("bee2"),F=n("bc3a"),_=n.n(F),$=function(){function e(){Object(C["a"])(this,e)}return Object(D["a"])(e,[{key:"upload",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=new FormData,i.append("file",t),e.next=4,_.a.post("/api/filelist/upload",i,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:n});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()}]),e}(),O=new $,j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-card-title",[e._v(" UPLOADING ")]),n("v-card-text",[n("v-container",{staticClass:"text-center"},[n("v-progress-circular",{attrs:{size:"150",width:"10",color:"primary",indeterminate:""}},[e._v(" "+e._s(e.uploadFileIndex)+" ")])],1),n("v-card-actions",[n("v-container",[e._v(" "+e._s(e.uploadFileName+" "+e.progressValue+"%")+" ")])],1)],1)],1)},I=[],z=(n("a9e3"),{props:{uploadFileIndex:{type:String,default:null},uploadFileName:{type:String,default:null},progressValue:{type:Number,default:null}}}),T=z,P=n("b0af"),N=n("99d9"),R=n("490a"),A=Object(h["a"])(T,j,I,!1,null,null,null),B=A.exports;v()(A,{VCard:P["a"],VCardActions:N["a"],VCardText:N["b"],VCardTitle:N["c"],VContainer:m["a"],VProgressCircular:R["a"]});var L={components:{ProgressPopup:B},props:{dialog:Boolean},data:function(){return{selectedFiles:[],uploadFileIndex:"",uploadFileName:"",progressValue:0,uploadDialog:!1}},methods:{close:function(){this.$emit("closeUpload")},uploadFiles:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n,i,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$emit("closeUpload"),n=e.selectedFiles,0!==n.length){t.next=4;break}return t.abrupt("return");case 4:e.uploadDialog=!0,i=0;case 6:if(!(i<n.length)){t.next=14;break}return e.uploadFileName=n[i].name,e.uploadFileIndex=i+1+"/"+n.length,t.next=11,e.fileuploadservice(i,n[i]);case 11:i++,t.next=6;break;case 14:return e.uploadDialog=!1,t.next=17,e.$axios.get("/api/filelist/refrash");case 17:a=t.sent,r=a.data,e.$store.dispatch("filelist/updateFilelist",r);case 20:case"end":return t.stop()}}),t)})))()},fileuploadservice:function(e,t){var n=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,O.upload(t,(function(e){n.progressValue=Math.round(100*e.loaded/e.total)}));case 2:case"end":return e.stop()}}),e)})))()}}},E=L,U=n("cc20"),M=(n("a623"),n("4160"),n("caad"),n("d81d"),n("13d5"),n("fb6a"),n("a434"),n("159b"),n("2909")),J=n("5530"),G=n("53ca"),K=(n("5803"),n("2677")),W=n("80d2"),q=n("d9bd"),H=n("d9f7"),Q=K["a"].extend({name:"v-file-input",model:{prop:"value",event:"change"},props:{chips:Boolean,clearable:{type:Boolean,default:!0},counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,placeholder:String,prependIcon:{type:String,default:"$file"},readonly:{type:Boolean,default:!1},showSize:{type:[Boolean,Number],default:!1,validator:function(e){return"boolean"===typeof e||[1e3,1024].includes(e)}},smallChips:Boolean,truncateLength:{type:[Number,String],default:22},type:{type:String,default:"file"},value:{default:void 0,validator:function(e){return Object(W["F"])(e).every((function(e){return null!=e&&"object"===Object(G["a"])(e)}))}}},computed:{classes:function(){return Object(J["a"])(Object(J["a"])({},K["a"].options.computed.classes.call(this)),{},{"v-file-input":!0})},computedCounterValue:function(){var e=this.isMultiple&&this.lazyValue?this.lazyValue.length:this.lazyValue instanceof File?1:0;if(!this.showSize)return this.$vuetify.lang.t(this.counterString,e);var t=this.internalArrayValue.reduce((function(e,t){var n=t.size,i=void 0===n?0:n;return e+i}),0);return this.$vuetify.lang.t(this.counterSizeString,e,Object(W["v"])(t,1024===this.base))},internalArrayValue:function(){return Object(W["F"])(this.internalValue)},internalValue:{get:function(){return this.lazyValue},set:function(e){this.lazyValue=e,this.$emit("change",this.lazyValue)}},isDirty:function(){return this.internalArrayValue.length>0},isLabelActive:function(){return this.isDirty},isMultiple:function(){return this.$attrs.hasOwnProperty("multiple")},text:function(){var e=this;return this.isDirty?this.internalArrayValue.map((function(t){var n=t.name,i=void 0===n?"":n,a=t.size,r=void 0===a?0:a,l=e.truncateText(i);return e.showSize?"".concat(l," (").concat(Object(W["v"])(r,1024===e.base),")"):l})):[this.placeholder]},base:function(){return"boolean"!==typeof this.showSize?this.showSize:void 0},hasChips:function(){return this.chips||this.smallChips}},watch:{readonly:{handler:function(e){!0===e&&Object(q["b"])("readonly is not supported on <v-file-input>",this)},immediate:!0},value:function(e){var t=this.isMultiple?e:e?[e]:[];Object(W["i"])(t,this.$refs.input.files)||(this.$refs.input.value="")}},methods:{clearableCallback:function(){this.internalValue=this.isMultiple?[]:void 0,this.$refs.input.value=""},genChips:function(){var e=this;return this.isDirty?this.text.map((function(t,n){return e.$createElement(U["a"],{props:{small:e.smallChips},on:{"click:close":function(){var t=e.internalValue;t.splice(n,1),e.internalValue=t}}},[t])})):[]},genControl:function(){var e=K["a"].options.methods.genControl.call(this);return this.hideInput&&(e.data.style=Object(H["c"])(e.data.style,{display:"none"})),e},genInput:function(){var e=K["a"].options.methods.genInput.call(this);return delete e.data.domProps.value,delete e.data.on.input,e.data.on.change=this.onInput,[this.genSelections(),e]},genPrependSlot:function(){var e=this;if(!this.prependIcon)return null;var t=this.genIcon("prepend",(function(){e.$refs.input.click()}));return this.genSlot("prepend","outer",[t])},genSelectionText:function(){var e=this.text.length;return e<2?this.text:this.showSize&&!this.counter?[this.computedCounterValue]:[this.$vuetify.lang.t(this.counterString,e)]},genSelections:function(){var e=this,t=[];return this.isDirty&&this.$scopedSlots.selection?this.internalArrayValue.forEach((function(n,i){e.$scopedSlots.selection&&t.push(e.$scopedSlots.selection({text:e.text[i],file:n,index:i}))})):t.push(this.hasChips&&this.isDirty?this.genChips():this.genSelectionText()),this.$createElement("div",{staticClass:"v-file-input__text",class:{"v-file-input__text--placeholder":this.placeholder&&!this.isDirty,"v-file-input__text--chips":this.hasChips&&!this.$scopedSlots.selection}},t)},genTextFieldSlot:function(){var e=this,t=K["a"].options.methods.genTextFieldSlot.call(this);return t.data.on=Object(J["a"])(Object(J["a"])({},t.data.on||{}),{},{click:function(){return e.$refs.input.click()}}),t},onInput:function(e){var t=Object(M["a"])(e.target.files||[]);this.internalValue=this.isMultiple?t:t[0],this.initialValue=this.internalValue},onKeyDown:function(e){this.$emit("keydown",e)},truncateText:function(e){if(e.length<Number(this.truncateLength))return e;var t=Math.floor((Number(this.truncateLength)-1)/2);return"".concat(e.slice(0,t),"…").concat(e.slice(e.length-t))}}}),X=n("2fa4"),Y=Object(h["a"])(E,S,k,!1,null,null,null),Z=Y.exports;v()(Y,{VBtn:g["a"],VCard:P["a"],VCardActions:N["a"],VCardText:N["b"],VCardTitle:N["c"],VChip:U["a"],VContainer:m["a"],VDialog:x["a"],VFileInput:Q,VIcon:y["a"],VSpacer:X["a"]});var ee={components:{FilelistTable:w,FileUpload:Z},mixins:[l["a"],o["a"]],data:function(){return{uploadDialog:!1}},methods:{deleteFiles:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$dialog.confirm({text:"Do you really want to delete files?",title:"Warning"});case 2:n=t.sent,n&&e.$refs.filelistTable.delete();case 4:case"end":return t.stop()}}),t)})))()}}},te=ee,ne=n("ce7e"),ie=Object(h["a"])(te,i,a,!1,null,null,null);t["default"]=ie.exports;v()(ie,{VBtn:g["a"],VCard:P["a"],VCardText:N["b"],VCardTitle:N["c"],VContainer:m["a"],VDialog:x["a"],VDivider:ne["a"],VIcon:y["a"],VSpacer:X["a"]})}}]);
//# sourceMappingURL=chunk-86fbcc06.35169630.js.map